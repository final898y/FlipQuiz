<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="翻測卡 - 支援 Google Sheets 的互動式學習卡片系統，支援選擇題、翻卡記憶等多種學習模式">
    <meta name="keywords" content="學習卡片,flashcard,記憶卡,題庫系統,線上學習">
    <meta name="author" content="翻測卡">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="翻測卡 FlipQuiz">
    <meta property="og:description" content="支援 Google Sheets 的互動式學習卡片系統">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>📚</text></svg>">
    
    <title>FlipQuiz 翻測卡</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="container">
        <header>
            <h1>FlipQuiz 翻測卡</h1>
        </header>

        <!-- 載入面板 -->
        <section class="settings-panel" role="region" aria-label="題庫設定">
            <label for="csv-url-input" class="visually-hidden">Google Sheets CSV 網址</label>
            <input 
                type="url" 
                id="csv-url-input" 
                placeholder="貼上 Google Sheets CSV 網址..."
                aria-label="CSV 網址輸入框"
                autocomplete="url"
                spellcheck="false"
            >
            <button 
                type="button"
                class="btn-sm"
                aria-label="載入題庫"
            >
                <span class="btn-text">載入題庫</span>
                <span class="btn-loading" aria-hidden="true">載入中...</span>
            </button>
        </section>

        <!-- 錯誤提示區域 -->
        <div id="error-message" class="error-message" role="alert" aria-live="polite"></div>

        <!-- SRS 狀態看板 -->
        <section id="status-dashboard" class="status-dashboard" aria-label="學習狀態統計">
            <div class="status-item due">
                <span class="status-label">待複習</span>
                <span id="count-due" class="status-value">0</span>
            </div>
            <div class="status-item new">
                <span class="status-label">未學習</span>
                <span id="count-new" class="status-value">0</span>
            </div>
            <div class="status-item mastered">
                <span class="status-label">已精通</span>
                <span id="count-mastered" class="status-value">0</span>
            </div>
        </section>

        <!-- 模式切換器 -->
        <nav id="mode-switcher" class="mode-switcher" role="tablist">
            <button type="button" class="mode-btn active" data-mode="browse" role="tab" aria-selected="true">
                📖 瀏覽模式
            </button>
            <button type="button" class="mode-btn" data-mode="review" role="tab" aria-selected="false">
                🧠 複習模式
            </button>
        </nav>

        <!-- 分類標籤 -->
        <nav id="category-tags" class="tags-container" role="navigation" aria-label="題目分類"></nav>

        <!-- 進度資訊 -->
        <div id="progress-info" class="progress-text" role="status" aria-live="polite">等待載入題庫...</div>

        <!-- 學習卡片 -->
        <div class="card" id="card" role="region" aria-label="學習卡片" tabindex="0">
            <div class="card-inner">
                <!-- 正面 -->
                <div class="card-face card-front" aria-hidden="false">
                    <div class="card-content">
                        <p id="question-text" class="question-text">請在上方輸入 CSV 網址並點擊載入。</p>
                        <div id="options-container" class="options-grid" role="group" aria-label="選項列表"></div>
                        
                    </div>
                    <small class="card-hint">正面：題目 (點擊翻面)</small>
                </div>
                
                <!-- 背面 -->
                <div class="card-face card-back" aria-hidden="true">
                    <div class="card-content">
                        <p id="answer-text" class="answer-text"></p>
                        <p id="note-text" class="note-style"></p>
                    </div>
                    <small class="card-hint">背面：答案與說明 (點擊翻回)</small>
                </div>
            </div>
        </div>

        <!-- 任務完成畫面 (預設隱藏) -->
        <div id="review-complete" class="review-complete hidden">
            <div class="complete-icon">🎉</div>
            <h2>今日複習任務已完成！</h2>
            <p>太棒了！您已經處理完所有到期的卡片。</p>
            <button type="button" class="btn btn-primary" onclick="location.reload()">重新整理</button>
        </div>

        <!-- 控制按鈕容器 -->
        <div class="controls-container">
            <!-- 瀏覽模式控制 (原本的控制項) -->
            <div id="browse-controls" class="controls" role="group" aria-label="卡片瀏覽控制">
                <button 
                    type="button"
                    class="btn btn-secondary" 
                    id="prev-btn"
                    aria-label="上一題"
                    title="上一題 (方向鍵 ←)"
                >
                    ← 上一題
                </button>
                <button 
                    type="button"
                    class="btn btn-shuffle" 
                    id="shuffle-btn"
                    aria-label="隨機洗牌"
                    title="隨機洗牌"
                >
                    🔀 洗牌
                </button>
                <button 
                    type="button"
                    class="btn btn-primary" 
                    id="next-btn"
                    aria-label="下一題"
                    title="下一題 (方向鍵 →)"
                >
                    下一題 →
                </button>
            </div>

            <!-- 複習模式 SRS 評分按鈕 (背面顯示) -->
            <div id="srs-controls" class="controls hidden" role="group" aria-label="SRS 評分控制">
                <button type="button" class="btn btn-srs again" data-rating="1" title="完全忘記 (鍵盤 1)">
                    <span class="btn-label">重來</span>
                    <span class="btn-subtext">Again</span>
                </button>
                <button type="button" class="btn btn-srs hard" data-rating="2" title="感到困難 (鍵盤 2)">
                    <span class="btn-label">困難</span>
                    <span class="btn-subtext">Hard</span>
                </button>
                <button type="button" class="btn btn-srs good" data-rating="3" title="表現良好 (鍵盤 3)">
                    <span class="btn-label">良好</span>
                    <span class="btn-subtext">Good</span>
                </button>
                <button type="button" class="btn btn-srs easy" data-rating="4" title="非常簡單 (鍵盤 4)">
                    <span class="btn-label">簡單</span>
                    <span class="btn-subtext">Easy</span>
                </button>
            </div>
        </div>

        <!-- 鍵盤提示 -->
        <div class="keyboard-hint">
            <small>💡 提示：使用 ← → 方向鍵切換題目，空白鍵翻轉卡片</small>
        </div>
    </div>

    <script type="module" src="js/main.js"></script>
</body>
</html>