# FlipQuiz 翻測卡：翻牌記憶 × 測驗練習 (Spaced Repetition System)

這是一個現代化、輕量級且功能強大的網頁學習工具，專為語言學習、名詞背誦或考試準備而設計。它完全在瀏覽器端運行，**不需要後端伺服器**，並原生支援透過 **Google Sheets (試算表)** 發佈的 CSV 資料進行即時更新。

## 核心特色

- **間隔重複系統 (Spaced Repetition System, SRS)**：
  - **SM-2 演算法**：內建經典的 SuperMemo-2 演算法，根據您的回饋自動計算下次最佳複習時間。
  - **狀態看板 (Dashboard)**：即時追蹤「🔴 待複習 (Due)」、「🔵 未學習 (New)」與「🟢 已精通 (Mastered)」的卡片分布。
  - **四種學習模式**：
    - **瀏覽模式 (Browse)**：自由瀏覽、手動洗牌，不計分亦不更新進度。
    - **手動 SRS (Manual Review)**：專注於今日到期任務，翻卡後需**手動評分** (1-4)。
    - **自動 SRS (Auto Review)**：針對測驗題的最佳化模式。依答錯次數**自動評分**並計算間隔。
    - **快速測驗 (Exam Mode)**：**純測驗模式**。提供即時記分板 (答對/答錯/準確率) 與結算報告，完全不影響 SRS 排程。
- **多樣化題型支援**：
  - **翻卡模式 (Flashcard)**：經典正反面記憶卡。
  - **測驗模式 (Quiz)**：互動式選擇題，提供即時對錯回饋。
- **📥 資料管理與備份**：
  - **CSV 匯出**：隨時將目前的學習進度（包含 SRS 等級、下次複習時間）匯出為 CSV 檔。
  - **Google Sheets 整合**：原生支援從 Google Sheets 發布的 CSV 網址載入題庫。
- **UI/UX 設計 (New)**：
  - **現代化風格**：採用 SaaS 等級的 Soft UI 設計，包含柔光陰影、3D 卡片透視與膠囊型導航。
  - **響應式 (RWD)**：完美支援桌機 (2K)、筆電 (Compact Mode) 與手機 (Mobile) 三種情境。
  - **護眼配色**：精心調配的 Slate Gray (石板灰) 色系，提供舒適的淺色模式與專業的深色模式 (Dark Mode)。
- **現代化技術架構**：
  - **ES6 模組化**：採用物件導向與單一職責原則 (SRP) 拆分邏輯。
  - **智慧快取 (LocalStorage)**：自動記憶上次載入的題庫網址、學習進度以及各分類的閱讀位置。
  - **無障礙與觸覺回饋**：支援手機震動 (Haptic Feedback)。
- **⌨ 完整快捷鍵支援**：
  - `←` `→`：切換上一題/下一題 (僅瀏覽模式)。
  - `Space` (空白鍵)：翻轉卡片。
  - `1` `2` `3` `4`：SRS 評分 (僅手動 SRS 模式)。
  - `Enter`：快速載入題庫。

## 快速開始

1.  **取得題庫網址**：按照 [建立題庫指南](#建立自己的題庫) 將 Google Sheet 發佈為 CSV。
2.  **載入網頁**：開啟 `index.html`。
3.  **輸入網址**：點擊右上角的「❓ 說明」可查看詳細步驟，或直接在輸入框貼上 CSV 網址並點擊「載入題庫」。
4.  **選擇模式**：
    - **手動 SRS**：傳統翻卡學習，適合深度記憶。
    - **自動 SRS**：選擇題專用，系統依答錯次數自動安排複習間隔。
    - **快速測驗**：挑戰自我，即時查看準確率與分數 (不影響複習進度)。
5.  **備份進度**：學習結束後，點擊右上角的「📥 匯出」按鈕下載最新的進度檔。

## 建立自己的題庫

您可以使用 Google Sheets 作為您的資料庫，隨時隨地更新題目。

### 1. 欄位定義 (Headers)

第一列必須包含以下欄位（大小寫需一致）：

| 欄位名稱 (Header) |  必填  | 說明                                  | 範例           | 補充說明                                                         |
| :---------------- | :----: | :------------------------------------ | :------------- | :--------------------------------------------------------------- |
| `uid`             |   否   | 唯一識別碼，若不提供則自動產生        | user_001       | 建議使用固定前綴 + 編號，方便追蹤與比對                          |
| `category`        |   否   | 分類標籤，支援按分類篩選              | 單字           | 可用來分群，例如「AI」、「英文單字」、「數學」                   |
| `type`            | **是** | `flashcard` (翻卡) 或 `quiz` (選擇題) | quiz           | 必須填寫，決定題目呈現方式                                       |
| `question`        | **是** | 正面顯示的文字 (題目)                 | Apple          | 建議保持簡潔，避免過長句子                                       |
| `answer`          | **是** | 背面顯示的文字 (正確答案)             | 蘋果           | ⚠️ 必須與 `options` 中的正確選項文字完全一致，否則程式比對會失敗 |
| `options`         |   否   | 選擇題選項，以分號 `;` 分隔           | 蘋果;香蕉;橘子 | 僅在 `type=quiz` 時需要，`flashcard` 可留空                      |
| `note`            |   否   | 背面的補充筆記                        | 複數為 apples  | 可用來補充解釋或提示                                             |
| `srs_level`       |   否   | SRS 階段 (0-n)                        | 0              | 建議初始值為 0，系統會隨學習進度更新                             |
| `next_review`     |   否   | 下次複習日期 (YYYY-MM-DD)             | 2026-01-10     | 建議由程式自動計算，避免手動輸入錯誤                             |
| `interval`        |   否   | 間隔天數 (SRS 演算法用)               | 3              | 由演算法決定，手動輸入僅限測試                                   |
| `easiness`        |   否   | 難易度係數 (SRS 演算法用，預設 2.5)   | 2.5            | 建議保持預設值，系統會依答題表現調整                             |
| `attempts`        |   否   | 總嘗試次數                            | 5              | 可用來追蹤學習歷程，初始值為 0                                   |

### 2. 發佈設定

1.  在 Google Sheets 點選 **「檔案」** > **「共用」** > **「發佈到網路」**。
2.  選擇 **「整份文件」** (或特定分頁)。
3.  格式務必選擇 **「逗點分隔值 (.csv)」**。
4.  點擊「發佈」並複製連結。

## 📂 專案結構 (Technical Overview)

本專案採用 Vanilla JavaScript 實作，不依賴任何重量級框架，確保極速載入。

```text
FlipQuiz/
├── index.html              # 語意化 HTML5 結構與 PWA 友善設計
├── style.css               # CSS 變數實作的系統主題 (含深色模式)
└── js/                     # ES6 模組
    ├── main.js             # 應用程式入口點、事件中樞
    ├── ui.js               # DOM 操作與視覺呈現邏輯
    ├── flashcardManager.js # 狀態管理中心 (State Manager)
    ├── srs.js              # SM-2 演算法核心邏輯
    ├── dataLoader.js       # 非同步資料抓取 (Fetch API)
    ├── cache.js            # LocalStorage 永續化儲存
    ├── utils.js            # CSV 解析 (含引號處理) 與隨機算法
    └── models/
        └── flashcardFactory.js # 資料模型標準化與 Object.seal 防護
```

## 🔮 待開發功能 (Roadmap)

- [x] **SRS 演算法整合 (SM-2)**：已完成自動計算間隔天數。
- [x] **UUID 產生器**：整合 `crypto.randomUUID` 確保進度追蹤唯一性。
- [x] **CSV 匯出與備份**：支援將學習進度匯出為 CSV 檔，以便保存數據。
- [ ] **Google OAuth2 寫回**：整合 Google Sheets API，實現學習數據直接寫回雲端 (目前可透過匯出 CSV 手動更新)。
- [ ] **多媒體支援**：支援在題目與答案中嵌入圖片或音訊 (TTS)。
- [ ] **PWA 支援**：提供離線學習能力。

## 📄 授權

本專案採用 [MIT License](LICENSE) 授權。
