# FlipQuiz 翻測卡：翻牌記憶 × 測驗練習 (Spaced Repetition System)

這是一個現代化、輕量級且功能強大的網頁學習工具，專為語言學習、名詞背誦或考試準備而設計。它完全在瀏覽器端運行，**不需要後端伺服器**，並原生支援透過 **Google Sheets (試算表)** 發佈的 CSV 資料進行即時更新。

## ✨ 核心特色

- **🧠 間隔重複系統 (Spaced Repetition System, SRS)**：
  - **SM-2 演算法**：內建經典的 SuperMemo-2 演算法，根據您的回饋自動計算下次最佳複習時間。
  - **狀態看板 (Dashboard)**：即時追蹤「🔴 待複習 (Due)」、「🔵 未學習 (New)」與「🟢 已精通 (Mastered)」的卡片分布。
  - **雙重學習模式**：
    - **📖 瀏覽模式 (Browse)**：自由瀏覽、手動洗牌，適合初步記憶與預習。
    - **🧠 複習模式 (Review)**：專注於今日到期任務，支援標準的 SRS 評分互動。
- **📊 多樣化題型支援**：
  - **翻卡模式 (Flashcard)**：經典正反面記憶卡。
  - **測驗模式 (Quiz)**：互動式選擇題，提供即時對錯回饋與視覺/觸覺效果。
- **📥 資料管理與備份**：
  - **CSV 匯出**：隨時將目前的學習進度（包含 SRS 等級、下次複習時間）匯出為 CSV 檔，方便備份或回存至 Google Sheets。
  - **Google Sheets 整合**：原生支援從 Google Sheets 發布的 CSV 網址載入題庫。
- **⚡ 現代化技術架構**：
  - **ES6 模組化**：採用物件導向與單一職責原則 (SRP) 拆分邏輯。
  - **智慧快取 (LocalStorage)**：自動記憶上次載入的題庫網址、學習進度以及各分類的閱讀位置。
  - **無障礙與觸覺回饋**：支援手機震動 (Haptic Feedback) 以及減少動態效果 (Reduced Motion) 設定。
- **⌨️ 完整快捷鍵支援**：
  - `←` `→`：切換上一題/下一題 (僅瀏覽模式)。
  - `Space` (空白鍵)：翻轉卡片。
  - `1` `2` `3` `4`：SRS 評分 (1: 重來, 2: 困難, 3: 良好, 4: 簡單) (僅複習模式)。
  - `Enter`：快速載入題庫。

## 🚀 快速開始

1.  **取得題庫網址**：按照 [建立題庫指南](#建立自己的題庫) 將 Google Sheet 發佈為 CSV。
2.  **載入網頁**：開啟 `index.html`。
3.  **輸入網址**：點擊右上角的「❓ 說明」可查看詳細步驟，或直接在輸入框貼上 CSV 網址並點擊「載入題庫」。
4.  **開始學習**：切換至「複習模式」進行今日的高效記憶任務。
5.  **備份進度**：學習結束後，點擊右上角的「📥 匯出」按鈕下載最新的進度檔。

## ⚙️ 建立自己的題庫

您可以使用 Google Sheets 作為您的資料庫，隨時隨地更新題目。

### 1. 欄位定義 (Headers)

第一列必須包含以下欄位（大小寫需一致）：

| 欄位名稱 (Header) | 必填 | 說明 | 範例 |
| :--- | :---: | :--- | :--- |
| `type` | **是** | `flashcard` (翻卡) 或 `quiz` (選擇題) | quiz |
| `question` | **是** | 正面顯示的文字 (題目) | Apple |
| `answer` | **是** | 背面顯示的文字 (正確答案) | 蘋果 |
| `category` | 否 | 分類標籤，支援按分類篩選 | 單字 |
| `options` | 否 | 選擇題選項，以分號 `;` 分隔 | 蘋果;香蕉;橘子 |
| `note` | 否 | 背面的補充筆記 | 複數為 apples |
| `uid` | 否 | 唯一識別碼，若不提供則自動產生 | user_001 |
| `srs_level` | 否 | SRS 階段 (0-n) | 0 |
| `next_review` | 否 | 下次複習日期 (YYYY-MM-DD) | 2026-01-10 |

### 2. 發佈設定

1.  在 Google Sheets 點選 **「檔案」** > **「共用」** > **「發佈到網路」**。
2.  選擇 **「整份文件」** (或特定分頁)。
3.  格式務必選擇 **「逗點分隔值 (.csv)」**。
4.  點擊「發佈」並複製連結。

## 📂 專案結構 (Technical Overview)

本專案採用 Vanilla JavaScript 實作，不依賴任何重量級框架，確保極速載入。

```text
FlipQuiz/
├── index.html              # 語意化 HTML5 結構與 PWA 友善設計
├── style.css               # CSS 變數實作的系統主題 (含深色模式)
└── js/                     # ES6 模組
    ├── main.js             # 應用程式入口點、事件中樞
    ├── ui.js               # DOM 操作與視覺呈現邏輯
    ├── flashcardManager.js # 狀態管理中心 (State Manager)
    ├── srs.js              # SM-2 演算法核心邏輯
    ├── dataLoader.js       # 非同步資料抓取 (Fetch API)
    ├── cache.js            # LocalStorage 永續化儲存
    ├── utils.js            # CSV 解析 (含引號處理) 與隨機算法
    └── models/
        └── flashcardFactory.js # 資料模型標準化與 Object.seal 防護
```

## 🔮 待開發功能 (Roadmap)

- [x] **SRS 演算法整合 (SM-2)**：已完成自動計算間隔天數。
- [x] **UUID 產生器**：整合 `crypto.randomUUID` 確保進度追蹤唯一性。
- [x] **CSV 匯出與備份**：支援將學習進度匯出為 CSV 檔，以便保存數據。
- [ ] **Google OAuth2 寫回**：整合 Google Sheets API，實現學習數據直接寫回雲端 (目前可透過匯出 CSV 手動更新)。
- [ ] **多媒體支援**：支援在題目與答案中嵌入圖片或音訊 (TTS)。
- [ ] **PWA 支援**：提供離線學習能力。

## 📄 授權

本專案採用 [MIT License](LICENSE) 授權。
